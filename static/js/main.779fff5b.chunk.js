(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),l=t(66),o=t.n(l),u=(t(74),t(1)),i=t(6),s=t(3),c=t(2),h=t(4),p=(t(27),t(9)),d=t(68),f=t.n(d),m="piece";var v=function(n){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,n),Object(i.a)(e,[{key:"componentDidMount",value:function(){var n=this,e=new Image(46,46);e.src=this.props.url,e.onload=function(){return n.props.connectDragPreview(e)}}},{key:"render",value:function(){var n=this.props.url,e=this.props,t=e.connectDragSource,r=e.isDragging;return t(a.a.createElement("div",{className:"piece_container"},a.a.createElement("img",{src:n,alt:"",className:"react_piece",style:{opacity:1,cursor:r?"grabbing":"grab"}})))}}]),e}(a.a.Component),g=Object(p.DragSource)(m,{beginDrag:function(n){return{id:n.id}},endDrag:function(n,e,t){if(e.didDrop()){var r=e.getItem();return n.handle_drag_end(r.id)}}},function(n,e){return{connectDragSource:n.dragSource(),connectDragPreview:n.dragPreview(),isDragging:e.isDragging()}})(v);var y=function(n){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,n),Object(i.a)(e,[{key:"render",value:function(){var n=this.props.style,e=this.props.class_name;return(0,this.props.connectDropTarget)(a.a.createElement("div",{className:e,style:n}," "))}}]),e}(a.a.Component),b=Object(p.DropTarget)(m,{drop:function(n){return n.handle_drop()}},function(n,e){return{connectDropTarget:n.dropTarget(),isOver:e.isOver()}})(y),_=t(16);function w(n,e){var t=W(n),r=Object(_.a)(t,3),a=r[0],l=r[1],o=r[2],u="white"===e?l:o,i=function(n,e,t){for(var r={},a=null,l=[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,1],[1,-1],[-1,-1]],o=null,u=0;u<l.length;u++)null!==(a=0===(o=l[u])[0]||0===o[1]?q(n,o,e,t,["Queen","Rook"]):q(n,o,e,t,["Queen","Bishop"]))&&(r[a[0]]=a[1]);return r}(a,u,e),s=C(a,u,e),c=Object(_.a)(s,2),h=c[0],p=c[1],d=null;if(h&&Object.keys(p).length>1)return N(a,u,e);for(var f=[],m=0;m<120;m++)null!==a[m]&&"boundary"!==a[m]&&a[m].player===e&&("Pawn"===a[m].name?f=f.concat(k(a,m,e,i)):"Knight"===a[m].name?f=f.concat(O(a,m,e,i)):"Bishop"===a[m].name?f=f.concat(j(a,m,e,i)):"Rook"===a[m].name?f=f.concat(S(a,m,e,i)):"Queen"===a[m].name?f=(f=f.concat(S(a,m,e,i))).concat(j(a,m,e,i)):"King"===a[m].name&&(f=f.concat(N(a,m,e))));return h&&(f=function(n,e,t,r,a){for(var l=Object.keys(r)[0],o=r[l],u=[n[l].name],i=e.length-1;i>=0;i--)"knight_attack"===o||"pawn_attack"===o?e[i][0][l].player!==a&&null!==e[i][0][t]&&e.splice(i,1):null!==E(e[i][0],o,t,a,u)&&null!==e[i][0][t]&&e.splice(i,1);return e}(a,f,u,p,e)),0===f.length&&(d=h?"Checkmate":"Stalemate"),[f,d]}function k(n,e,t,r){var a=[],l=n[e],o=I(1,e,t),u=I(2,e,t),i=A(1,e,t),s=x(1,e,t),c=A(1,I(1,e,t),t),h=x(1,I(1,e,t),t);return l.has_moved||null!==n[u]||null!==n[o]||(a=a.concat(D(l,e,u,r,[0,1],n,!1,null))),null===n[o]&&(a=a.concat(D(l,e,o,r,[0,1],n,!1,null))),null!==n[c]&&"boundary"!==n[c]&&n[c].player!==t&&(a=a.concat(D(l,e,c,r,[-1,1],n,!1,null))),null!==n[h]&&"boundary"!==n[h]&&n[h].player!==t&&(a=a.concat(D(l,e,h,r,[1,1],n,!1,null))),null!==n[s]&&"boundary"!==n[s]&&"Pawn"===n[s].name&&n[s].player!==t&&n[s].just_moved_two&&(a=a.concat(D(l,e,h,r,[1,1],n,!0,s))),null!==n[i]&&"boundary"!==n[i]&&"Pawn"===n[i].name&&n[i].player!==t&&n[i].just_moved_two&&(a=a.concat(D(l,e,c,r,[-1,1],n,!0,i))),a}function O(n,e,t,r){var a=[];if(e in r)return a;for(var l=n[e],o=K(e,t),u=0;u<o.length;u++)null===n[o[u]]&&"boundary"!==n[o[u]]?a.push(Q(l,e,o[u],n)):n[o[u]].player!==t&&"boundary"!==n[o[u]]&&a.push(Q(l,e,o[u],n));return a}function j(n,e,t,r){for(var a=[],l=n[e],o=null,u=null,i=[[1,1],[-1,1],[1,-1],[-1,-1]],s=0;s<i.length;s++)e in r?(u=[-1*(o=r[e])[0],-1*o[1]],i[s].toString()!==o.toString()&&i[s].toString()!==u.toString()||(a=a.concat(J(n,i[s],e,t,l)))):a=a.concat(J(n,i[s],e,t,l));return a}function S(n,e,t,r){for(var a=[],l=n[e],o=null,u=null,i=[[0,1],[0,-1],[-1,0],[1,0]],s=0;s<i.length;s++)e in r?(u=[-1*(o=r[e])[0],-1*o[1]],i[s].toString()!==o.toString()&&i[s].toString()!==u.toString()||(a=a.concat(J(n,i[s],e,t,l)))):a=a.concat(J(n,i[s],e,t,l));return a}function N(n,e,t){var r=[],a=n[e],l=n.slice();l[e]=null;for(var o=P(e,t),u=0;u<o.length;u++)null===n[o[u]]?C(l,o[u],t)[0]||r.push(Q(a,e,o[u],n)):"boundary"===n[o[u]]||n[o[u]].player===t||C(l,o[u],t)[0]||r.push(Q(a,e,o[u],n));return a.has_moved||C(n,e,t)[0]||(95!==e||null===n[98]||n[98].has_moved||null!==n[96]||null!==n[97]||C(n,96,t)[0]||C(n,97,t)[0]||r.push(B(a,95,97,n[98],98,96,n)),25!==e||null===n[28]||n[28].has_moved||null!==n[26]||null!==n[27]||C(n,26,t)[0]||C(n,27,t)[0]||r.push(B(a,25,27,n[28],28,26,n)),95!==e||null===n[91]||n[91].has_moved||null!==n[94]||null!==n[93]||null!==n[92]||C(n,94,t)[0]||C(n,93,t)[0]||r.push(B(a,95,93,n[91],91,94,n)),25!==e||null===n[21]||n[21].has_moved||null!==n[24]||null!==n[23]||null!==n[22]||C(n,24,t)[0]||C(n,23,t)[0]||r.push(B(a,25,23,n[21],21,24,n))),r}function E(n,e,t,r,a){for(var l=M(e,t,r),o=null;null===n[l];)l=M(e,l,r);var u=n[l];if("boundary"!==u&&u.player!==r)for(var i=0;i<a.length;i++)a[i]===u.name&&(o=[l,e]);return o}function C(n,e,t){for(var r=!1,a={},l=null,o=[x(1,I(1,e,t),t),A(1,I(1,e,t),t)],u=K(e,t),i=P(e,t),s=[[1,1],[-1,1],[1,-1],[-1,-1]],c=[[0,1],[0,-1],[-1,0],[1,0]],h=0;h<s.length;h++)null!==(l=E(n,s[h],e,t,["Queen","Bishop"]))&&(r=!0,a[l[0]]=l[1]);for(h=0;h<c.length;h++)null!==(l=E(n,c[h],e,t,["Queen","Rook"]))&&(r=!0,a[l[0]]=l[1]);for(h=0;h<u.length;h++){var p=n[u[h]];"boundary"!==p&&null!==p&&p.player!==t&&"Knight"===p.name&&(r=!0,a[u[h]]="knight_attack")}for(h=0;h<o.length;h++){var d=n[o[h]];"boundary"!==d&&null!==d&&d.player!==t&&"Pawn"===d.name&&(r=!0,a[o[h]]="pawn_attack")}for(h=0;h<i.length;h++){var f=n[i[h]];"boundary"!==f&&null!==f&&f.player!==t&&"King"===f.name&&(r=!0)}return[r,a]}function q(n,e,t,r,a){for(var l=M(e,t,r),o=null;null===n[l];)l=M(e,l,r);if("boundary"!==n[l]&&n[l].player===r){for(o=l,l=M(e,l,r);null===n[l];)l=M(e,l,r);if("boundary"!==n[l]&&n[l].player!==r)for(var u=0;u<a.length;u++)if(n[l].name===a[u])return[o,e]}return null}function D(n,e,t,r,a,l,o,u){var i=[],s=null,c=null;if(e in r)c=[-1*(s=r[e])[0],-1*s[1]],a.toString()!==s.toString()&&a.toString()!==c.toString()||(o?i.push(R(n,e,t,u,l)):i.push(Q(n,e,t,l)));else if(o)i.push(R(n,e,t,u,l));else if(t>=91||t<=28)for(var h=[new H(n.player),new L(n.player),new G(n.player),new U(n.player)],p=0;p<h.length;p++)i.push(Q(h[p],e,t,l));else i.push(Q(n,e,t,l));return i}function J(n,e,t,r,a){for(var l=[],o=M(e,t,r);null===n[o];)l.push(Q(a,t,o,n)),o=M(e,o,r);return"boundary"!==n[o]&&n[o].player!==r&&l.push(Q(a,t,o,n)),l}function K(n,e){return[x(1,I(2,n,e),e),A(1,I(2,n,e),e),x(1,T(2,n,e),e),A(1,T(2,n,e),e),x(2,I(1,n,e),e),x(2,T(1,n,e),e),A(2,I(1,n,e),e),A(2,T(1,n,e),e)]}function P(n,e){return[I(1,n,e),x(1,I(1,n,e),e),A(1,I(1,n,e),e),A(1,n,e),x(1,n,e),x(1,T(1,n,e),e),A(1,T(1,n,e),e),T(1,n,e)]}function Q(n,e,t,r){return(r=r.slice())[e]=null,r[t]=n,[r,[e,t,n,{standard:!0}]]}function B(n,e,t,r,a,l,o){return(o=o.slice())[e]=null,o[a]=null,o[t]=n,o[l]=r,[o,[e,t,n,{castle:[a,l,r]}]]}function R(n,e,t,r,a){return(a=a.slice())[e]=null,a[t]=n,a[r]=null,[a,[e,t,n,{en_passant:r}]]}function M(n,e,t){var r=n[0],a=n[1],l=x(1,I(1,e,t),t),o=A(1,I(1,e,t),t),u=x(1,T(1,e,t),t),i=A(1,T(1,e,t),t),s=I(1,e,t),c=T(1,e,t),h=x(1,e,t),p=A(1,e,t);return 0===r&&1===a?s:-1===r&&1===a?o:1===r&&1===a?l:1===r&&0===a?h:-1===r&&0===a?p:1===r&&-1===a?u:-1===r&&-1===a?i:0===r&&-1===a?c:void 0}function I(n,e,t){return"white"===t?e-10*n:e+10*n}function T(n,e,t){return"white"===t?e+10*n:e-10*n}function A(n,e,t){return"white"===t?e-n:e+n}function x(n,e,t){return"white"===t?e+n:e-n}function W(n){for(var e=Array(120).fill(null),t=0,r=0,a=null,l=null,o=0;o<12;o++)for(var u=0;u<10;u++)r=10*o+u,0===u||9===u||0===o||1===o||10===o||11===o?e[r]="boundary":(e[r]=n[t],null!==n[t]&&"King"===n[t].name&&("white"===n[t].player?a=r:l=r),t+=1);return[e,a,l]}function F(n){for(var e=n.slice(),t=0;t<e.length;t++)null!=e[t]&&"boundary"!==e[t]&&(e[t]=e[t].name+e[t].player);return e.toString()}var $=function n(e,t,r){Object(u.a)(this,n),this.player=e,this.style={backgroundImage:"url('"+t+"')"},this.name=r,this.url=t,this.has_moved=!1},z=function(n){function e(n){var t;Object(u.a)(this,e);var r="https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg";return"black"===n&&(r="https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg"),(t=Object(s.a)(this,Object(c.a)(e).call(this,n,r,"Pawn"))).just_moved_two=!1,t}return Object(h.a)(e,n),e}($),G=function(n){function e(n){Object(u.a)(this,e);var t="https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg";return"black"===n&&(t="https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg"),Object(s.a)(this,Object(c.a)(e).call(this,n,t,"Rook"))}return Object(h.a)(e,n),e}($),H=function(n){function e(n){Object(u.a)(this,e);var t="https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg";return"black"===n&&(t="https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg"),Object(s.a)(this,Object(c.a)(e).call(this,n,t,"Knight"))}return Object(h.a)(e,n),e}($),L=function(n){function e(n){Object(u.a)(this,e);var t="https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg";return"black"===n&&(t="https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg"),Object(s.a)(this,Object(c.a)(e).call(this,n,t,"Bishop"))}return Object(h.a)(e,n),e}($),U=function(n){function e(n){Object(u.a)(this,e);var t="https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg";return"black"===n&&(t="https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg"),Object(s.a)(this,Object(c.a)(e).call(this,n,t,"Queen"))}return Object(h.a)(e,n),e}($),V=function(n){function e(n){Object(u.a)(this,e);var t="https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg";return"black"===n&&(t="https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg"),Object(s.a)(this,Object(c.a)(e).call(this,n,t,"King"))}return Object(h.a)(e,n),e}($);function X(){for(var n=Array(64).fill(null),e=0;e<8;e++)n[e+8]=new z("black"),n[e+48]=new z("white");for(var t="black",r=0;r<2;r++)1===r&&(t="white"),n[56*r]=new G(t),n[56*r+7]=new G(t),n[56*r+1]=new H(t),n[56*r+6]=new H(t),n[56*r+2]=new L(t),n[56*r+5]=new L(t),n[56*r+3]=new U(t),n[56*r+4]=new V(t);return n}function Y(){return W(X())[0]}var Z=function(){function n(e,t){Object(u.a)(this,n),this.player=e,this.squares=t,this.king_locations=null}return Object(i.a)(n,[{key:"set_king_locations",value:function(){for(var n=null,e=null,t=this.squares,r=0;r<t.length;r++){var a=t[r];null!==a&&"boundary"!==a&&"King"===a.name&&("white"===a.player?n=r:e=r)}this.king_locations={white:n,black:e}}},{key:"make_move",value:function(n){var e=n[0],t=n[1],r=JSON.parse(JSON.stringify(n[2])),a=this.squares;if(console.log(a[e]),a[e]=null,a[t]=r,r.has_moved=!0,"en_passant"in n[3])a[n[3].en_passant]=null;else if("castle"in n[3]){var l=n[3].castle,o=JSON.parse(JSON.stringify(l[2]));a[l[0]]=null,a[l[1]]=o,o.has_moved=!0}return"King"===r.name&&(this.king_locations[this.player]=t),"white"===this.player?this.player="black":this.player="white",a}}]),n}();function nn(n,e){var t=e[0],r=e[1],a=JSON.parse(JSON.stringify(e[2])),l=W(n)[0];if(l[t]=null,l[r]=a,a.has_moved=!0,"en_passant"in e[3])l[e[3].en_passant]=null;else if("castle"in e[3]){var o=e[3].castle,u=JSON.parse(JSON.stringify(o[2]));l[o[0]]=null,l[o[1]]=u,u.has_moved=!0}return l=function(n){for(var e=Array(64).fill(null),t=0,r=0,a=0;a<12;a++)for(var l=0;l<10;l++)r=10*a+l,0===l||9===l||0===a||1===a||10===a||11===a||(e[t]=n[r],t+=1);return e}(l)}function en(n,e){var t=e[0],r=e[1],a=JSON.parse(JSON.stringify(e[2])),l=n;if(l[t]=null,l[r]=a,a.has_moved=!0,"en_passant"in e[3])l[e[3].en_passant]=null;else if("castle"in e[3]){var o=e[3].castle,u=JSON.parse(JSON.stringify(o[2]));l[o[0]]=null,l[o[1]]=u,u.has_moved=!0}return l}function tn(n,e,t,r){var a=n,l="white"===e?t:r,o=function(n,e,t){for(var r={},a=null,l=[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,1],[1,-1],[-1,-1]],o=null,u=0;u<l.length;u++)null!==(a=0===(o=l[u])[0]||0===o[1]?hn(n,o,e,t,["Queen","Rook"]):hn(n,o,e,t,["Queen","Bishop"]))&&(r[a[0]]=a[1]);return r}(a,l,e),u=cn(a,l,e),i=Object(_.a)(u,2),s=i[0],c=i[1],h=null;if(s&&Object.keys(c).length>1)return un(a,l,e);for(var p=[],d=0;d<120;d++)null!==a[d]&&"boundary"!==a[d]&&a[d].player===e&&("Pawn"===a[d].name?p=p.concat(rn(a,d,e,o)):"Knight"===a[d].name?p=p.concat(an(a,d,e,o)):"Bishop"===a[d].name?p=p.concat(ln(a,d,e,o)):"Rook"===a[d].name?p=p.concat(on(a,d,e,o)):"Queen"===a[d].name?p=(p=p.concat(on(a,d,e,o))).concat(ln(a,d,e,o)):"King"===a[d].name&&(p=p.concat(un(a,d,e))));return s&&(p=function(n,e,t,r,a){for(var l=Object.keys(r)[0],o=r[l],u=[n[l].name],i=e.length-1;i>=0;i--)"knight_attack"===o||"pawn_attack"===o?e[i][0][l].player!==a&&null!==e[i][0][t]&&e.splice(i,1):null!==sn(e[i][0],o,t,a,u)&&null!==e[i][0][t]&&e.splice(i,1);return e}(a,p,l,c,e)),0===p.length&&(h=s?"Checkmate":"Stalemate"),[p,h]}function rn(n,e,t,r){var a=[],l=n[e],o=_n(1,e,t),u=_n(2,e,t),i=kn(1,e,t),s=On(1,e,t),c=kn(1,_n(1,e,t),t),h=On(1,_n(1,e,t),t);return l.has_moved||null!==n[u]||null!==n[o]||(a=a.concat(pn(l,e,u,r,[0,1],n,!1,null))),null===n[o]&&(a=a.concat(pn(l,e,o,r,[0,1],n,!1,null))),null!==n[c]&&"boundary"!==n[c]&&n[c].player!==t&&(a=a.concat(pn(l,e,c,r,[-1,1],n,!1,null))),null!==n[h]&&"boundary"!==n[h]&&n[h].player!==t&&(a=a.concat(pn(l,e,h,r,[1,1],n,!1,null))),null!==n[s]&&"boundary"!==n[s]&&"Pawn"===n[s].name&&n[s].player!==t&&n[s].just_moved_two&&(a=a.concat(pn(l,e,h,r,[1,1],n,!0,s))),null!==n[i]&&"boundary"!==n[i]&&"Pawn"===n[i].name&&n[i].player!==t&&n[i].just_moved_two&&(a=a.concat(pn(l,e,c,r,[-1,1],n,!0,i))),a}function an(n,e,t,r){var a=[];if(e in r)return a;for(var l=n[e],o=fn(e,t),u=0;u<o.length;u++)null===n[o[u]]&&"boundary"!==n[o[u]]?a.push(vn(l,e,o[u],n)):n[o[u]].player!==t&&"boundary"!==n[o[u]]&&a.push(vn(l,e,o[u],n));return a}function ln(n,e,t,r){for(var a=[],l=n[e],o=null,u=null,i=[[1,1],[-1,1],[1,-1],[-1,-1]],s=0;s<i.length;s++)e in r?(u=[-1*(o=r[e])[0],-1*o[1]],i[s].toString()!==o.toString()&&i[s].toString()!==u.toString()||(a=a.concat(dn(n,i[s],e,t,l)))):a=a.concat(dn(n,i[s],e,t,l));return a}function on(n,e,t,r){for(var a=[],l=n[e],o=null,u=null,i=[[0,1],[0,-1],[-1,0],[1,0]],s=0;s<i.length;s++)e in r?(u=[-1*(o=r[e])[0],-1*o[1]],i[s].toString()!==o.toString()&&i[s].toString()!==u.toString()||(a=a.concat(dn(n,i[s],e,t,l)))):a=a.concat(dn(n,i[s],e,t,l));return a}function un(n,e,t){var r=[],a=n[e],l=n.slice();l[e]=null;for(var o=mn(e,t),u=0;u<o.length;u++)null===n[o[u]]?cn(l,o[u],t)[0]||r.push(vn(a,e,o[u],n)):"boundary"===n[o[u]]||n[o[u]].player===t||cn(l,o[u],t)[0]||r.push(vn(a,e,o[u],n));return a.has_moved||cn(n,e,t)[0]||(95!==e||null===n[98]||n[98].has_moved||null!==n[96]||null!==n[97]||cn(n,96,t)[0]||cn(n,97,t)[0]||r.push(gn(a,95,97,n[98],98,96,n)),25!==e||null===n[28]||n[28].has_moved||null!==n[26]||null!==n[27]||cn(n,26,t)[0]||cn(n,27,t)[0]||r.push(gn(a,25,27,n[28],28,26,n)),95!==e||null===n[91]||n[91].has_moved||null!==n[94]||null!==n[93]||null!==n[92]||cn(n,94,t)[0]||cn(n,93,t)[0]||r.push(gn(a,95,93,n[91],91,94,n)),25!==e||null===n[21]||n[21].has_moved||null!==n[24]||null!==n[23]||null!==n[22]||cn(n,24,t)[0]||cn(n,23,t)[0]||r.push(gn(a,25,23,n[21],21,24,n))),r}function sn(n,e,t,r,a){for(var l=bn(e,t,r),o=null;null===n[l];)l=bn(e,l,r);var u=n[l];if("boundary"!==u&&u.player!==r)for(var i=0;i<a.length;i++)a[i]===u.name&&(o=[l,e]);return o}function cn(n,e,t){for(var r=!1,a={},l=null,o=[On(1,_n(1,e,t),t),kn(1,_n(1,e,t),t)],u=fn(e,t),i=mn(e,t),s=[[1,1],[-1,1],[1,-1],[-1,-1]],c=[[0,1],[0,-1],[-1,0],[1,0]],h=0;h<s.length;h++)null!==(l=sn(n,s[h],e,t,["Queen","Bishop"]))&&(r=!0,a[l[0]]=l[1]);for(h=0;h<c.length;h++)null!==(l=sn(n,c[h],e,t,["Queen","Rook"]))&&(r=!0,a[l[0]]=l[1]);for(h=0;h<u.length;h++){var p=n[u[h]];"boundary"!==p&&null!==p&&p.player!==t&&"Knight"===p.name&&(r=!0,a[u[h]]="knight_attack")}for(h=0;h<o.length;h++){var d=n[o[h]];"boundary"!==d&&null!==d&&d.player!==t&&"Pawn"===d.name&&(r=!0,a[o[h]]="pawn_attack")}for(h=0;h<i.length;h++){var f=n[i[h]];"boundary"!==f&&null!==f&&f.player!==t&&"King"===f.name&&(r=!0)}return[r,a]}function hn(n,e,t,r,a){for(var l=bn(e,t,r),o=null;null===n[l];)l=bn(e,l,r);if("boundary"!==n[l]&&n[l].player===r){for(o=l,l=bn(e,l,r);null===n[l];)l=bn(e,l,r);if("boundary"!==n[l]&&n[l].player!==r)for(var u=0;u<a.length;u++)if(n[l].name===a[u])return[o,e]}return null}function pn(n,e,t,r,a,l,o,u){var i=[],s=null,c=null;if(e in r)c=[-1*(s=r[e])[0],-1*s[1]],a.toString()!==s.toString()&&a.toString()!==c.toString()||(o?i.push(yn(n,e,t,u,l)):i.push(vn(n,e,t,l)));else if(o)i.push(yn(n,e,t,u,l));else if(t>=91||t<=28)for(var h=[new H(n.player),new L(n.player),new G(n.player),new U(n.player)],p=0;p<h.length;p++)i.push(vn(h[p],e,t,l));else i.push(vn(n,e,t,l));return i}function dn(n,e,t,r,a){for(var l=[],o=bn(e,t,r);null===n[o];)l.push(vn(a,t,o,n)),o=bn(e,o,r);return"boundary"!==n[o]&&n[o].player!==r&&l.push(vn(a,t,o,n)),l}function fn(n,e){return[On(1,_n(2,n,e),e),kn(1,_n(2,n,e),e),On(1,wn(2,n,e),e),kn(1,wn(2,n,e),e),On(2,_n(1,n,e),e),On(2,wn(1,n,e),e),kn(2,_n(1,n,e),e),kn(2,wn(1,n,e),e)]}function mn(n,e){return[_n(1,n,e),On(1,_n(1,n,e),e),kn(1,_n(1,n,e),e),kn(1,n,e),On(1,n,e),On(1,wn(1,n,e),e),kn(1,wn(1,n,e),e),wn(1,n,e)]}function vn(n,e,t,r){return(r=r.slice())[e]=null,r[t]=n,[r,[e,t,n,{standard:!0}]]}function gn(n,e,t,r,a,l,o){return(o=o.slice())[e]=null,o[a]=null,o[t]=n,o[l]=r,[o,[e,t,n,{castle:[a,l,r]}]]}function yn(n,e,t,r,a){return(a=a.slice())[e]=null,a[t]=n,a[r]=null,[a,[e,t,n,{en_passant:r}]]}function bn(n,e,t){var r=n[0],a=n[1],l=On(1,_n(1,e,t),t),o=kn(1,_n(1,e,t),t),u=On(1,wn(1,e,t),t),i=kn(1,wn(1,e,t),t),s=_n(1,e,t),c=wn(1,e,t),h=On(1,e,t),p=kn(1,e,t);return 0===r&&1===a?s:-1===r&&1===a?o:1===r&&1===a?l:1===r&&0===a?h:-1===r&&0===a?p:1===r&&-1===a?u:-1===r&&-1===a?i:0===r&&-1===a?c:void 0}function _n(n,e,t){return"white"===t?e-10*n:e+10*n}function wn(n,e,t){return"white"===t?e+10*n:e-10*n}function kn(n,e,t){return"white"===t?e-n:e+n}function On(n,e,t){return"white"===t?e+n:e-n}function jn(){var n=performance.now(),e=function n(e,t,r){if(0===e)return t;for(var a=[],l=0;l<t.length;l++){var o=t[l][0],u=t[l][1],i=en(o,u);a=a.concat(tn(i,r,95,25)[0])}var s="white"===r?"black":"white";return n(e-1,a,s)}(2,tn(Y(),"white",95,25)[0],"black").length,t=performance.now();console.log("nodes per second ",e/((t-n)/1e3),"total_positions: ",e),new Z("white",Y()).set_king_locations()}var Sn=function(n){function e(n){var t;return Object(u.a)(this,e),(t=Object(s.a)(this,Object(c.a)(e).call(this,n))).state={history:[{squares:X()}],player:"white",drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null,test:jn()},t}return Object(h.a)(e,n),Object(i.a)(e,[{key:"reset",value:function(){this.setState({history:[{squares:X()}],player:"white",drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null})}},{key:"back",value:function(){var n=this.state.history.slice(),e=this.state.player;1!==n.length&&(n.pop(),e="white"===e?"black":"white",this.setState({history:n,player:e,status:null}))}},{key:"engine_move",value:function(){var n=this.state.history.slice(),e=n[n.length-1].squares.slice(),t=this.state.player,r=w(e,t),a=r[0];if(null===r[1]){var l=nn(e,a[Math.floor(Math.random()*a.length)][1]);t="white"===t?"black":"white",this.setState({history:n.concat([{squares:l}]),player:t})}else this.setState({status:r[1]})}},{key:"handle_drop",value:function(n){this.setState({drag_end:n})}},{key:"handle_drag_end",value:function(n){var e=this.state.history.slice(),t=e[e.length-1].squares.slice(),r=n,a=this.state.drag_end,l=this.state.player,o=JSON.parse(JSON.stringify(t[r]));if((a<8||a>55)&&"Pawn"===o.name){var u={class:"promotion_container",start:r,end:a,player:l};this.setState({promotion:u})}else this.change_states(e,t,l,r,a,o)}},{key:"handle_promotion",value:function(n){var e=this.state.history.slice(),t=e[e.length-1].squares.slice(),r=this.state.promotion,a=r.start,l=r.end,o=r.player;this.change_states(e,t,o,a,l,n),this.setState({promotion:{class:"hidden",start:null,end:null,player:null}})}},{key:"change_states",value:function(n,e,t,r,a,l){var o=w(e,t)[0];if(function(n,e,t,r){"Pawn"===r.name&&(16===Math.abs(n-e)?r.just_moved_two=!0:(r.just_moved_two=!1,7===Math.abs(n-e)&&null===t[e]?"white"===r.player?t[n+1]=null:t[n-1]=null:9===Math.abs(n-e)&&null===t[e]&&("white"===r.player?t[n-1]=null:t[n+1]=null))),"King"===r.name&&(e-n===2?(t[n+1]=t[e+1],t[e+1]=null):n-e===2&&(t[n-1]=t[e-2],t[e-2]=null)),t[n]=null,t[e]=r,r.has_moved=!0}(r,a,e,l),function(n,e){for(var t=W(n)[0],r=!1,a=0;a<e.length;a++)F(e[a][0])===F(t)&&(r=!0);return r}(e,o)){var u=w(e,t="white"===t?"black":"white")[1];this.setState({history:n.concat([{squares:e}]),drag_end:null,player:t,status:u})}}},{key:"render",value:function(){var n=this,e=this.state.history,t=e[e.length-1].squares,r=this.state.player,l=this.state.promotion.class,o=this.state.status;return a.a.createElement("div",{className:"game_container"},a.a.createElement("div",{className:"status"}," ",o," "),a.a.createElement(Cn,{back:function(){return n.back()},reset:function(){return n.reset()},engine_move:function(){return n.engine_move()}}),a.a.createElement("div",{className:"board_container"},a.a.createElement(Nn,{squares:t,onDragStart:function(e){return n.drag_start(e)},onDragEnd:function(e){return n.drag_end(e)},onDrop:function(e){return n.drop(e)},player:this.state.player,handle_drop:function(e){return n.handle_drop(e)},handle_drag_end:function(e){return n.handle_drag_end(e)}})),a.a.createElement(qn,{className:l,player:r,handle_promotion:function(e){return n.handle_promotion(e)}}))}}]),e}(r.Component),Nn=function(n){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,n),Object(i.a)(e,[{key:"renderSquares",value:function(){for(var n=this,e=[],t=!1,r=0;r<8;r++){t=!t;for(var l=[],o=function(){var e=8*r+u,o=a.a.createElement(En,{value:n.props.squares[e],key:e,color:t,player:n.props.player,handle_drop:function(){return n.props.handle_drop(e)},handle_drag_end:function(e){return n.props.handle_drag_end(e)},id:e});l.push(o),t=!t},u=0;u<8;u++)o();l=a.a.createElement("div",{className:"board_row",key:r}," ",l," "),e.push(l)}return e}},{key:"render",value:function(){return a.a.createElement("div",null,this.renderSquares())}}]),e}(a.a.Component),En=function(n){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,n),Object(i.a)(e,[{key:"renderSquare",value:function(n){var e=this,t="dark square",r=null,l=null,o=null;return n&&(t="light square"),this.props.value&&(r=this.props.value.style,l=this.props.value.url,o=this.props.value.player),this.props.player===o?a.a.createElement("div",{className:t},a.a.createElement(g,{url:l,id:this.props.id,handle_drag_end:function(n){return e.props.handle_drag_end(n)}})):a.a.createElement(b,{class_name:t,style:r,handle_drop:function(){return e.props.handle_drop()}})}},{key:"render",value:function(){var n=this.props.color;return a.a.createElement(a.a.Fragment,null,this.renderSquare(n))}}]),e}(a.a.Component);function Cn(n){return a.a.createElement("div",null,a.a.createElement("button",{className:"reset_button",onClick:function(){return n.reset()}}," Reset"),a.a.createElement("button",{className:"back_button",onClick:function(){return n.back()}}," Back"),a.a.createElement("button",{className:"engine_button",onClick:function(){return n.engine_move()}}," Engine Move"))}var qn=function(n){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,n),Object(i.a)(e,[{key:"render",value:function(){var n=this,e=new H(this.props.player),t=new L(this.props.player),r=new G(this.props.player),l=new U(this.props.player);return r.has_moved=!0,a.a.createElement("div",{className:this.props.className},a.a.createElement("div",{className:"promotion"},a.a.createElement("button",{className:"promotion_button",style:e.style,onClick:function(){return n.props.handle_promotion(e)}}),a.a.createElement("button",{className:"promotion_button",style:t.style,onClick:function(){return n.props.handle_promotion(t)}}),a.a.createElement("button",{className:"promotion_button",style:r.style,onClick:function(){return n.props.handle_promotion(r)}}),a.a.createElement("button",{className:"promotion_button",style:l.style,onClick:function(){return n.props.handle_promotion(l)}})))}}]),e}(a.a.Component),Dn=Object(p.DragDropContext)(f.a)(Sn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Dn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})},27:function(n,e,t){},69:function(n,e,t){n.exports=t(193)},74:function(n,e,t){}},[[69,2,1]]]);
//# sourceMappingURL=main.779fff5b.chunk.js.map