(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(66),o=t.n(l),i=(t(74),t(1)),s=t(6),u=t(3),c=t(2),h=t(4),p=(t(26),t(9)),d=t(68),m=t.n(d),f="piece";var v=function(e){function n(){return Object(i.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=new Image(46,46);n.src=this.props.url,n.onload=function(){return e.props.connectDragPreview(n)}}},{key:"render",value:function(){var e=this.props.url,n=this.props,t=n.connectDragSource,a=n.isDragging;return t(r.a.createElement("div",{className:"piece_container"},r.a.createElement("img",{src:e,alt:"",className:"react_piece",style:{opacity:1,cursor:a?"grabbing":"grab"}})))}}]),n}(r.a.Component),g=Object(p.DragSource)(f,{beginDrag:function(e){return{id:e.id}},endDrag:function(e,n,t){if(n.didDrop()){var a=n.getItem();return e.handle_drag_end(a.id)}}},function(e,n){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:n.isDragging()}})(v);var b=function(e){function n(){return Object(i.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this.props.style,n=this.props.class_name;return(0,this.props.connectDropTarget)(r.a.createElement("div",{className:n,style:e}," "))}}]),n}(r.a.Component),y=Object(p.DropTarget)(f,{drop:function(e){return e.handle_drop()}},function(e,n){return{connectDropTarget:e.dropTarget(),isOver:n.isOver()}})(b),_=function e(n,t,a){Object(i.a)(this,e),this.player=n,this.style={backgroundImage:"url('"+t+"')"},this.name=a,this.url=t,this.has_moved=!1},w=function(e){function n(e){var t;Object(i.a)(this,n);var a="https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg";return"black"===e&&(a="https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg"),(t=Object(u.a)(this,Object(c.a)(n).call(this,e,a,"Pawn"))).just_moved_two=!1,t}return Object(h.a)(n,e),n}(_),k=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg"),Object(u.a)(this,Object(c.a)(n).call(this,e,t,"Rook"))}return Object(h.a)(n,e),n}(_),O=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg"),Object(u.a)(this,Object(c.a)(n).call(this,e,t,"Knight"))}return Object(h.a)(n,e),n}(_),j=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg"),Object(u.a)(this,Object(c.a)(n).call(this,e,t,"Bishop"))}return Object(h.a)(n,e),n}(_),S=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg"),Object(u.a)(this,Object(c.a)(n).call(this,e,t,"Queen"))}return Object(h.a)(n,e),n}(_),E=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg"),Object(u.a)(this,Object(c.a)(n).call(this,e,t,"King"))}return Object(h.a)(n,e),n}(_);function C(){for(var e=Array(64).fill(null),n=0;n<8;n++)e[n+8]=new w("black"),e[n+48]=new w("white");for(var t="black",a=0;a<2;a++)1===a&&(t="white"),e[56*a]=new k(t),e[56*a+7]=new k(t),e[56*a+1]=new O(t),e[56*a+6]=new O(t),e[56*a+2]=new j(t),e[56*a+5]=new j(t),e[56*a+3]=new S(t),e[56*a+4]=new E(t);return e}var N=t(42);function D(e,n){var t=V(e),a=Object(N.a)(t,3),r=a[0],l=a[1],o=a[2],i="white"===n?l:o,s=function(e,n,t){for(var a={},r=null,l=[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,1],[1,-1],[-1,-1]],o=null,i=0;i<l.length;i++)null!==(r=0===(o=l[i])[0]||0===o[1]?R(e,o,n,t,["Queen","Rook"]):R(e,o,n,t,["Queen","Bishop"]))&&(a[r[0]]=r[1]);return a}(r,i,n),u=Q(r,i,n),c=Object(N.a)(u,2),h=c[0],p=c[1],d=null;if(h&&Object.keys(p).length>1)return B(r,i,n);for(var m=[],f=0;f<120;f++)null!==r[f]&&"boundary"!==r[f]&&r[f].player===n&&("Pawn"===r[f].name?m=m.concat(q(r,f,n,s)):"Knight"===r[f].name?m=m.concat(P(r,f,n,s)):"Bishop"===r[f].name?m=m.concat(J(r,f,n,s)):"Rook"===r[f].name?m=m.concat(K(r,f,n,s)):"Queen"===r[f].name?m=(m=m.concat(K(r,f,n,s))).concat(J(r,f,n,s)):"King"===r[f].name&&(m=m.concat(B(r,f,n))));return h&&(m=function(e,n,t,a,r){for(var l=Object.keys(a)[0],o=a[l],i=[e[l].name],s=n.length-1;s>=0;s--)"knight_attack"===o||"pawn_attack"===o?n[s][0][l].player!==r&&null!==n[s][0][t]&&n.splice(s,1):null!==M(n[s][0],o,t,r,i)&&null!==n[s][0][t]&&n.splice(s,1);return n}(r,m,i,p,n)),0===m.length&&(d=h?"Checkmate":"Stalemate"),[m,d]}function q(e,n,t,a){var r=[],l=e[n],o=G(1,n,t),i=G(2,n,t),s=L(1,n,t),u=U(1,n,t),c=L(1,G(1,n,t),t),h=U(1,G(1,n,t),t);return l.has_moved||null!==e[i]||null!==e[o]||(r=r.concat(I(l,n,i,a,[0,1],e,!1,null))),null===e[o]&&(r=r.concat(I(l,n,o,a,[0,1],e,!1,null))),null!==e[c]&&"boundary"!==e[c]&&e[c].player!==t&&(r=r.concat(I(l,n,c,a,[-1,1],e,!1,null))),null!==e[h]&&"boundary"!==e[h]&&e[h].player!==t&&(r=r.concat(I(l,n,h,a,[1,1],e,!1,null))),null!==e[u]&&"boundary"!==e[u]&&"Pawn"===e[u].name&&e[u].player!==t&&e[u].just_moved_two&&(r=r.concat(I(l,n,h,a,[1,1],e,!0,u))),null!==e[s]&&"boundary"!==e[s]&&"Pawn"===e[s].name&&e[s].player!==t&&e[s].just_moved_two&&(r=r.concat(I(l,n,c,a,[-1,1],e,!0,s))),r}function P(e,n,t,a){var r=[];if(n in a)return r;for(var l=e[n],o=A(n,t),i=0;i<o.length;i++)null===e[o[i]]&&"boundary"!==e[o[i]]?r.push(W(l,n,o[i],e)):e[o[i]].player!==t&&"boundary"!==e[o[i]]&&r.push(W(l,n,o[i],e));return r}function J(e,n,t,a){for(var r=[],l=e[n],o=null,i=null,s=[[1,1],[-1,1],[1,-1],[-1,-1]],u=0;u<s.length;u++)n in a?(i=[-1*(o=a[n])[0],-1*o[1]],s[u].toString()!==o.toString()&&s[u].toString()!==i.toString()||(r=r.concat(T(e,s[u],n,t,l)))):r=r.concat(T(e,s[u],n,t,l));return r}function K(e,n,t,a){for(var r=[],l=e[n],o=null,i=null,s=[[0,1],[0,-1],[-1,0],[1,0]],u=0;u<s.length;u++)n in a?(i=[-1*(o=a[n])[0],-1*o[1]],s[u].toString()!==o.toString()&&s[u].toString()!==i.toString()||(r=r.concat(T(e,s[u],n,t,l)))):r=r.concat(T(e,s[u],n,t,l));return r}function B(e,n,t){var a=[],r=e[n],l=e.slice();l[n]=null;for(var o=x(n,t),i=0;i<o.length;i++)null===e[o[i]]?Q(l,o[i],t)[0]||a.push(W(r,n,o[i],e)):"boundary"===e[o[i]]||e[o[i]].player===t||Q(l,o[i],t)[0]||a.push(W(r,n,o[i],e));return r.has_moved||Q(e,n,t)[0]||(95!==n||null===e[98]||e[98].has_moved||null!==e[96]||null!==e[97]||Q(e,96,t)[0]||Q(e,97,t)[0]||a.push(F(r,95,97,e[98],98,96,e)),25!==n||null===e[28]||e[28].has_moved||null!==e[26]||null!==e[27]||Q(e,26,t)[0]||Q(e,27,t)[0]||a.push(F(r,25,27,e[28],28,26,e)),95!==n||null===e[91]||e[91].has_moved||null!==e[94]||null!==e[93]||null!==e[92]||Q(e,94,t)[0]||Q(e,93,t)[0]||a.push(F(r,95,93,e[91],91,94,e)),25!==n||null===e[21]||e[21].has_moved||null!==e[24]||null!==e[23]||null!==e[22]||Q(e,24,t)[0]||Q(e,23,t)[0]||a.push(F(r,25,23,e[21],21,24,e))),a}function M(e,n,t,a,r){for(var l=z(n,t,a),o=null;null===e[l];)l=z(n,l,a);var i=e[l];if("boundary"!==i&&i.player!==a)for(var s=0;s<r.length;s++)r[s]===i.name&&(o=[l,n]);return o}function Q(e,n,t){for(var a=!1,r={},l=null,o=[U(1,G(1,n,t),t),L(1,G(1,n,t),t)],i=A(n,t),s=x(n,t),u=[[1,1],[-1,1],[1,-1],[-1,-1]],c=[[0,1],[0,-1],[-1,0],[1,0]],h=0;h<u.length;h++)null!==(l=M(e,u[h],n,t,["Queen","Bishop"]))&&(a=!0,r[l[0]]=l[1]);for(h=0;h<c.length;h++)null!==(l=M(e,c[h],n,t,["Queen","Rook"]))&&(a=!0,r[l[0]]=l[1]);for(h=0;h<i.length;h++){var p=e[i[h]];"boundary"!==p&&null!==p&&p.player!==t&&"Knight"===p.name&&(a=!0,r[i[h]]="knight_attack")}for(h=0;h<o.length;h++){var d=e[o[h]];"boundary"!==d&&null!==d&&d.player!==t&&"Pawn"===d.name&&(a=!0,r[o[h]]="pawn_attack")}for(h=0;h<s.length;h++){var m=e[s[h]];"boundary"!==m&&null!==m&&m.player!==t&&"King"===m.name&&(a=!0)}return[a,r]}function R(e,n,t,a,r){for(var l=z(n,t,a),o=null;null===e[l];)l=z(n,l,a);if("boundary"!==e[l]&&e[l].player===a){for(o=l,l=z(n,l,a);null===e[l];)l=z(n,l,a);if("boundary"!==e[l]&&e[l].player!==a)for(var i=0;i<r.length;i++)if(e[l].name===r[i])return[o,n]}return null}function I(e,n,t,a,r,l,o,i){var s=[],u=null,c=null;if(n in a)c=[-1*(u=a[n])[0],-1*u[1]],r.toString()!==u.toString()&&r.toString()!==c.toString()||(o?s.push($(e,n,t,i,l)):s.push(W(e,n,t,l)));else if(o)s.push($(e,n,t,i,l));else if(t>=91||t<=28)for(var h=[new O(e.player),new j(e.player),new k(e.player),new S(e.player)],p=0;p<h.length;p++)s.push(W(h[p],n,t,l));else s.push(W(e,n,t,l));return s}function T(e,n,t,a,r){for(var l=[],o=z(n,t,a);null===e[o];)l.push(W(r,t,o,e)),o=z(n,o,a);return"boundary"!==e[o]&&e[o].player!==a&&l.push(W(r,t,o,e)),l}function A(e,n){return[U(1,G(2,e,n),n),L(1,G(2,e,n),n),U(1,H(2,e,n),n),L(1,H(2,e,n),n),U(2,G(1,e,n),n),U(2,H(1,e,n),n),L(2,G(1,e,n),n),L(2,H(1,e,n),n)]}function x(e,n){return[G(1,e,n),U(1,G(1,e,n),n),L(1,G(1,e,n),n),L(1,e,n),U(1,e,n),U(1,H(1,e,n),n),L(1,H(1,e,n),n),H(1,e,n)]}function W(e,n,t,a){return(a=a.slice())[n]=null,a[t]=e,[a,[n,t,e,{standard:!0}]]}function F(e,n,t,a,r,l,o){return(o=o.slice())[n]=null,o[r]=null,o[t]=e,o[l]=a,[o,[n,t,e,{castle:[r,l,a]}]]}function $(e,n,t,a,r){return(r=r.slice())[n]=null,r[t]=e,r[a]=null,[r,[n,t,e,{en_passant:a}]]}function z(e,n,t){var a=e[0],r=e[1],l=U(1,G(1,n,t),t),o=L(1,G(1,n,t),t),i=U(1,H(1,n,t),t),s=L(1,H(1,n,t),t),u=G(1,n,t),c=H(1,n,t),h=U(1,n,t),p=L(1,n,t);return 0===a&&1===r?u:-1===a&&1===r?o:1===a&&1===r?l:1===a&&0===r?h:-1===a&&0===r?p:1===a&&-1===r?i:-1===a&&-1===r?s:0===a&&-1===r?c:void 0}function G(e,n,t){return"white"===t?n-10*e:n+10*e}function H(e,n,t){return"white"===t?n+10*e:n-10*e}function L(e,n,t){return"white"===t?n-e:n+e}function U(e,n,t){return"white"===t?n+e:n-e}function V(e){for(var n=Array(120).fill(null),t=0,a=0,r=null,l=null,o=0;o<12;o++)for(var i=0;i<10;i++)a=10*o+i,0===i||9===i||0===o||1===o||10===o||11===o?n[a]="boundary":(n[a]=e[t],null!==e[t]&&"King"===e[t].name&&("white"===e[t].player?r=a:l=a),t+=1);return[n,r,l]}function X(e){for(var n=e.slice(),t=0;t<n.length;t++)null!=n[t]&&"boundary"!==n[t]&&(n[t]=n[t].name);return n.toString()}function Y(e,n){var t=n[0],a=n[1],r=JSON.parse(JSON.stringify(n[2])),l=V(e)[0];if(l[t]=null,l[a]=r,r.has_moved=!0,"en_passant"in n[3])l[n[3].en_passant]=null;else if("castle"in n[3]){var o=n[3].castle,i=JSON.parse(JSON.stringify(o[2]));l[o[0]]=null,l[o[1]]=i,i.has_moved=!0}return l=function(e){for(var n=Array(64).fill(null),t=0,a=0,r=0;r<12;r++)for(var l=0;l<10;l++)a=10*r+l,0===l||9===l||0===r||1===r||10===r||11===r||(n[t]=e[a],t+=1);return n}(l)}var Z=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(u.a)(this,Object(c.a)(n).call(this,e))).state={history:[{squares:C()}],player:"white",drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null},t}return Object(h.a)(n,e),Object(s.a)(n,[{key:"reset",value:function(){this.setState({history:[{squares:C()}],player:"white",drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null})}},{key:"back",value:function(){var e=this.state.history.slice(),n=this.state.player;1!==e.length&&(e.pop(),n="white"===n?"black":"white",this.setState({history:e,player:n,status:null}))}},{key:"engine_move",value:function(){var e=this.state.history.slice(),n=e[e.length-1].squares.slice(),t=this.state.player,a=D(n,t),r=a[0];if(null===a[1]){var l=Y(n,r[Math.floor(Math.random()*r.length)][1]);t="white"===t?"black":"white",this.setState({history:e.concat([{squares:l}]),player:t})}else this.setState({status:a[1]})}},{key:"handle_drop",value:function(e){this.setState({drag_end:e})}},{key:"handle_drag_end",value:function(e){var n=this.state.history.slice(),t=n[n.length-1].squares.slice(),a=e,r=this.state.drag_end,l=this.state.player,o=JSON.parse(JSON.stringify(t[a]));if((r<8||r>55)&&"Pawn"===o.name){var i={class:"promotion_container",start:a,end:r,player:l};this.setState({promotion:i})}else this.change_states(n,t,l,a,r,o)}},{key:"handle_promotion",value:function(e){var n=this.state.history.slice(),t=n[n.length-1].squares.slice(),a=this.state.promotion,r=a.start,l=a.end,o=a.player;this.change_states(n,t,o,r,l,e),this.setState({promotion:{class:"hidden",start:null,end:null,player:null}})}},{key:"change_states",value:function(e,n,t,a,r,l){var o=D(n,t)[0];if(function(e,n,t,a){"Pawn"===a.name&&(16===Math.abs(e-n)?a.just_moved_two=!0:(a.just_moved_two=!1,7===Math.abs(e-n)&&null===t[n]?"white"===a.player?t[e+1]=null:t[e-1]=null:9===Math.abs(e-n)&&null===t[n]&&("white"===a.player?t[e-1]=null:t[e+1]=null))),"King"===a.name&&(n-e===2?(t[e+1]=t[n+1],t[n+1]=null):e-n===2&&(t[e-1]=t[n-2],t[n-2]=null)),t[e]=null,t[n]=a,a.has_moved=!0}(a,r,n,l),function(e,n){for(var t=V(e)[0],a=!1,r=0;r<n.length;r++)X(n[r][0])===X(t)&&(a=!0);return a}(n,o)){var i=D(n,t="white"===t?"black":"white")[1];this.setState({history:e.concat([{squares:n}]),drag_end:null,player:t,status:i})}}},{key:"render",value:function(){var e=this,n=this.state.history,t=n[n.length-1].squares,a=this.state.player,l=this.state.promotion.class,o=this.state.status;return r.a.createElement("div",{className:"game_container"},r.a.createElement("div",{className:"status"}," ",o," "),r.a.createElement(te,{back:function(){return e.back()},reset:function(){return e.reset()},engine_move:function(){return e.engine_move()}}),r.a.createElement("div",{className:"board_container"},r.a.createElement(ee,{squares:t,onDragStart:function(n){return e.drag_start(n)},onDragEnd:function(n){return e.drag_end(n)},onDrop:function(n){return e.drop(n)},player:this.state.player,handle_drop:function(n){return e.handle_drop(n)},handle_drag_end:function(n){return e.handle_drag_end(n)}})),r.a.createElement(ae,{className:l,player:a,handle_promotion:function(n){return e.handle_promotion(n)}}))}}]),n}(a.Component),ee=function(e){function n(){return Object(i.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"renderSquares",value:function(){for(var e=this,n=[],t=!1,a=0;a<8;a++){t=!t;for(var l=[],o=function(){var n=8*a+i,o=r.a.createElement(ne,{value:e.props.squares[n],key:n,color:t,player:e.props.player,handle_drop:function(){return e.props.handle_drop(n)},handle_drag_end:function(n){return e.props.handle_drag_end(n)},id:n});l.push(o),t=!t},i=0;i<8;i++)o();l=r.a.createElement("div",{className:"board_row",key:a}," ",l," "),n.push(l)}return n}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderSquares())}}]),n}(r.a.Component),ne=function(e){function n(){return Object(i.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"renderSquare",value:function(e){var n=this,t="dark square",a=null,l=null,o=null;return e&&(t="light square"),this.props.value&&(a=this.props.value.style,l=this.props.value.url,o=this.props.value.player),this.props.player===o?r.a.createElement("div",{className:t},r.a.createElement(g,{url:l,id:this.props.id,handle_drag_end:function(e){return n.props.handle_drag_end(e)}})):r.a.createElement(y,{class_name:t,style:a,handle_drop:function(){return n.props.handle_drop()}})}},{key:"render",value:function(){var e=this.props.color;return r.a.createElement(r.a.Fragment,null,this.renderSquare(e))}}]),n}(r.a.Component);function te(e){return r.a.createElement("div",null,r.a.createElement("button",{className:"reset_button",onClick:function(){return e.reset()}}," Reset"),r.a.createElement("button",{className:"back_button",onClick:function(){return e.back()}}," Back"),r.a.createElement("button",{className:"engine_button",onClick:function(){return e.engine_move()}}," Engine Move"))}var ae=function(e){function n(){return Object(i.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=new O(this.props.player),t=new j(this.props.player),a=new k(this.props.player),l=new S(this.props.player);return a.has_moved=!0,r.a.createElement("div",{className:this.props.className},r.a.createElement("div",{className:"promotion"},r.a.createElement("button",{className:"promotion_button",style:n.style,onClick:function(){return e.props.handle_promotion(n)}}),r.a.createElement("button",{className:"promotion_button",style:t.style,onClick:function(){return e.props.handle_promotion(t)}}),r.a.createElement("button",{className:"promotion_button",style:a.style,onClick:function(){return e.props.handle_promotion(a)}}),r.a.createElement("button",{className:"promotion_button",style:l.style,onClick:function(){return e.props.handle_promotion(l)}})))}}]),n}(r.a.Component),re=Object(p.DragDropContext)(m.a)(Z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},26:function(e,n,t){},69:function(e,n,t){e.exports=t(193)},74:function(e,n,t){}},[[69,2,1]]]);
//# sourceMappingURL=main.50b00d38.chunk.js.map