(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(66),o=t.n(l),i=(t(74),t(1)),u=t(6),s=t(3),c=t(2),h=t(4),p=(t(27),t(9)),v=t(68),f=t.n(v),m="piece";var d=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=new Image(46,46);n.src=this.props.url,n.onload=function(){return e.props.connectDragPreview(n)}}},{key:"render",value:function(){var e=this.props.url,n=this.props,t=n.connectDragSource,a=n.isDragging;return t(r.a.createElement("div",{className:"piece_container"},r.a.createElement("img",{src:e,alt:"",className:"react_piece",style:{opacity:1,cursor:a?"grabbing":"grab"}})))}}]),n}(r.a.Component),g=Object(p.DragSource)(m,{beginDrag:function(e){return{id:e.id}},endDrag:function(e,n,t){if(n.didDrop()){var a=n.getItem();return e.handle_drag_end(a.id)}}},function(e,n){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:n.isDragging()}})(d);var b=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props.style,n=this.props.class_name;return(0,this.props.connectDropTarget)(r.a.createElement("div",{className:n,style:e}," "))}}]),n}(r.a.Component),y=Object(p.DropTarget)(m,{drop:function(e){return e.handle_drop()}},function(e,n){return{connectDropTarget:e.dropTarget(),isOver:n.isOver()}})(b),k=function e(n,t,a){Object(i.a)(this,e),this.player=n,this.style={backgroundImage:"url('"+t+"')"},this.name=a,this.url=t,this.has_moved=!1},w=function(e){function n(e){var t;Object(i.a)(this,n);var a="https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg";return"black"===e&&(a="https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg"),(t=Object(s.a)(this,Object(c.a)(n).call(this,e,a,"Pawn"))).just_moved_two=!1,t}return Object(h.a)(n,e),n}(k),_=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg"),Object(s.a)(this,Object(c.a)(n).call(this,e,t,"Rook"))}return Object(h.a)(n,e),n}(k),O=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg"),Object(s.a)(this,Object(c.a)(n).call(this,e,t,"Knight"))}return Object(h.a)(n,e),n}(k),j=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg"),Object(s.a)(this,Object(c.a)(n).call(this,e,t,"Bishop"))}return Object(h.a)(n,e),n}(k),S=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg"),Object(s.a)(this,Object(c.a)(n).call(this,e,t,"Queen"))}return Object(h.a)(n,e),n}(k),E=function(e){function n(e){Object(i.a)(this,n);var t="https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg";return"black"===e&&(t="https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg"),Object(s.a)(this,Object(c.a)(n).call(this,e,t,"King"))}return Object(h.a)(n,e),n}(k),C=t(26),N={Pawn:1,Knight:3,Bishop:3.3,Rook:5,Queen:9.5,King:0},q=function(){function e(n,t,a){Object(i.a)(this,e),this.position=n,this.history=t,this.moves=a}return Object(u.a)(e,[{key:"moves",value:function(){return P(this.position)}},{key:"make_move",value:function(e){var n=this.history.slice(),t=this.moves.slice(),a=M(this.position,e);this.position=a,this.history=n.concat(a),this.moves=t.concat(e)}}]),e}(),D=function e(n,t,a,r,l,o){Object(i.a)(this,e),this.player=n,this.squares=t,this.king_locations=a,this.castle_state=r,this.material_balance=l,this.en_passant_square=o},K=function e(n,t,a,r,l,o){Object(i.a)(this,e),this.start=n,this.end=t,this.en_passant_capture=a,this.rook_start=r,this.rook_end=l,this.promotion_piece=o};function M(e,n){var t=n.start,a=n.end,r=e.player,l=e.squares.slice(),o=JSON.parse(JSON.stringify(l[t])),i=e.king_locations.slice(),u=e.castle_state.slice(),s=e.material_balance,c=null;if(null!==n.en_passant_capture&&(l[n.en_passant_capture]=null),"Pawn"===o.name&&20===Math.abs(t-a)&&(c=t+(a-t)/2),null!==n.rook_start){var h=JSON.parse(JSON.stringify(l[n.rook_start]));l[n.rook_start]=null,l[n.rook_end]=h,h.has_moved=!0}return"King"===o.name&&("white"===o.player?(i[0]=a,u[0]=0,u[1]=0):(i[1]=a,u[2]=0,u[3]=0)),"Rook"!==o.name||o.has_moved||(98===t?u[0]=0:91===t?u[1]=0:28===t?u[2]=0:21===t&&(u[3]=0)),null!==l[a]&&"Rook"===l[a].name&&(98===a?u[0]=0:91===a?u[1]=0:28===a?u[2]=0:21===a&&(u[3]=0)),null!==s&&null!==l[a]&&("white"===e.player?s+=N[l[a].name]:s-=N[l[a].name]),null!==n.promotion_piece&&(s="white"===(o=n.promotion_piece).player?s+N[o.name]-1:s-N[o.name]+1),l[t]=null,l[a]=o,o.has_moved=!0,new D(r="white"===r?"black":"white",l,i,u,s,c)}function P(e){var n=e.squares,t=e.player,a="white"===t?e.king_locations[0]:e.king_locations[1],r=T(n,a,t),l=null,o=e.castle_state,i=e.en_passant_square;null!==i&&(l=function(e,n,t,a){var r=Z(1,n),l=e.slice();return l[r]=null,T(l,t,a)}(n,i,a,t));var u=function(e,n,t){for(var a=[],r=[],l=te(1,Z(1,n,t),t),o=ne(1,Z(1,n,t),t),i=[l,o],u=z(n,t),s=[[1,1],[-1,1],[1,-1],[-1,-1]],c=[[0,1],[0,-1],[-1,0],[1,0]],h=0;h<s.length;h++){var p=F(e,s[h],n,t,["Queen","Bishop"]),v=Object(C.a)(p,2),f=v[0],m=v[1];null!==m&&(r=r.concat(f),a.push(m))}for(h=0;h<c.length;h++){var d=F(e,c[h],n,t,["Queen","Rook"]),g=Object(C.a)(d,2),f=g[0],m=g[1];null!==m&&(r=r.concat(f),a.push(m))}for(h=0;h<u.length;h++){var b=e[u[h]];"boundary"!==b&&null!==b&&b.player!==t&&"Knight"===b.name&&(r=r.concat([u[h]]),a.push(b))}for(h=0;h<i.length;h++){var y=e[i[h]];"boundary"!==y&&null!==y&&y.player!==t&&"Pawn"===y.name&&(r=r.concat([i[h]]),a.push(y))}return[a,r]}(n,a,t),s=Object(C.a)(u,2),c=s[0],h=s[1],p=c.length>0;if(c.length>1)return J(n,a,t,o);for(var v=[],f=0;f<120;f++)null!==n[f]&&"boundary"!==n[f]&&n[f].player===t&&("Pawn"===n[f].name?v=v.concat(R(n,f,t,r,i,l)):"Knight"===n[f].name?v=v.concat(Q(n,f,t,r)):"Bishop"===n[f].name?v=v.concat(B(n,f,t,r)):"Rook"===n[f].name?v=v.concat(A(n,f,t,r)):"Queen"===n[f].name?v=(v=v.concat(A(n,f,t,r))).concat(B(n,f,t,r)):"King"===n[f].name&&(v=v.concat(J(n,f,t,o,p))));return c.length>0&&(v=function(e,n,t){for(var a=e.length-1;a>=0;a--){var r=e[a];t.includes(r.end)||t.includes(r.en_passant_capture)||r.start===n||e.splice(a,1)}return e}(v,a,h)),v}function R(e,n,t,a,r,l){var o=[],i=e[n],u=Z(1,n,t),s=Z(2,n,t),c=ne(1,n,t),h=te(1,n,t),p=ne(1,Z(1,n,t),t),v=te(1,Z(1,n,t),t);return i.has_moved||null!==e[s]||null!==e[u]||(o=o.concat(W(i,n,s,a,[0,1],!1,null,null))),null===e[u]&&(o=o.concat(W(i,n,u,a,[0,1],!1,null,null))),null!==e[p]&&"boundary"!==e[p]&&e[p].player!==t&&(o=o.concat(W(i,n,p,a,[-1,1],!1,null,null))),null!==e[v]&&"boundary"!==e[v]&&e[v].player!==t&&(o=o.concat(W(i,n,v,a,[1,1],!1,null,null))),v===r&&(o=o.concat(W(i,n,v,a,[1,1],!0,h,l))),p===r&&(o=o.concat(W(i,n,p,a,[-1,1],!0,c,l))),o}function Q(e,n,t,a){var r=[];if(n in a)return r;for(var l=z(n,t),o=0;o<l.length;o++)null===e[l[o]]&&"boundary"!==e[l[o]]?r.push(L(n,l[o])):e[l[o]].player!==t&&"boundary"!==e[l[o]]&&r.push(L(n,l[o]));return r}function B(e,n,t,a){for(var r=[],l=e[n],o=null,i=null,u=[[1,1],[-1,1],[1,-1],[-1,-1]],s=0;s<u.length;s++)n in a?(i=[-1*(o=a[n])[0],-1*o[1]],u[s].toString()!==o.toString()&&u[s].toString()!==i.toString()||(r=r.concat($(e,u[s],n,t,l)))):r=r.concat($(e,u[s],n,t,l));return r}function A(e,n,t,a){for(var r=[],l=e[n],o=null,i=null,u=[[0,1],[0,-1],[-1,0],[1,0]],s=0;s<u.length;s++)n in a?(i=[-1*(o=a[n])[0],-1*o[1]],u[s].toString()!==o.toString()&&u[s].toString()!==i.toString()||(r=r.concat($(e,u[s],n,t,l)))):r=r.concat($(e,u[s],n,t,l));return r}function J(e,n,t,a,r){var l=[],o=e.slice();o[n]=null;for(var i=H(n,t),u=0;u<i.length;u++)null===e[i[u]]?I(o,i[u],t)[0]||l.push(L(n,i[u])):"boundary"===e[i[u]]||e[i[u]].player===t||I(o,i[u],t)[0]||l.push(L(n,i[u]));return r||(1===a[0]&&null===e[96]&&null===e[97]&&(I(e,96,t)[0]||I(e,97,t)[0]||l.push(V(95,97,98,96))),1===a[1]&&null===e[94]&&null===e[93]&&null===e[92]&&(I(e,94,t)[0]||I(e,93,t)[0]||l.push(V(95,93,91,94))),1===a[2]&&null===e[26]&&null===e[27]&&(I(e,26,t)[0]||I(e,27,t)[0]||l.push(V(25,27,28,26))),1===a[3]&&null===e[24]&&null===e[23]&&null===e[22]&&(I(e,24,t)[0]||I(e,23,t)[0]||l.push(V(25,23,21,24)))),l}function x(e,n,t,a,r){for(var l=Y(n,t,a),o=null;null===e[l];)l=Y(n,l,a);var i=e[l];if("boundary"!==i&&i.player!==a)for(var u=0;u<r.length;u++)r[u]===i.name&&(o=[l,n]);return o}function F(e,n,t,a,r){for(var l=Y(n,t,a),o=[l];null===e[l];)l=Y(n,l,a),o.push(l);var i=e[l];if("boundary"!==i&&i.player!==a)for(var u=0;u<r.length;u++)if(r[u]===i.name)return o.push(l),[o,i];return[null,null]}function I(e,n,t){for(var a=!1,r={},l=null,o=[te(1,Z(1,n,t),t),ne(1,Z(1,n,t),t)],i=z(n,t),u=H(n,t),s=[[1,1],[-1,1],[1,-1],[-1,-1]],c=[[0,1],[0,-1],[-1,0],[1,0]],h=0;h<s.length;h++)null!==(l=x(e,s[h],n,t,["Queen","Bishop"]))&&(a=!0,r[l[0]]=l[1]);for(h=0;h<c.length;h++)null!==(l=x(e,c[h],n,t,["Queen","Rook"]))&&(a=!0,r[l[0]]=l[1]);for(h=0;h<i.length;h++){var p=e[i[h]];"boundary"!==p&&null!==p&&p.player!==t&&"Knight"===p.name&&(a=!0,r[i[h]]="knight_attack")}for(h=0;h<o.length;h++){var v=e[o[h]];"boundary"!==v&&null!==v&&v.player!==t&&"Pawn"===v.name&&(a=!0,r[o[h]]="pawn_attack")}for(h=0;h<u.length;h++){var f=e[u[h]];"boundary"!==f&&null!==f&&f.player!==t&&"King"===f.name&&(a=!0)}return[a,r]}function T(e,n,t){for(var a={},r=null,l=[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,1],[1,-1],[-1,-1]],o=null,i=0;i<l.length;i++)null!==(r=0===(o=l[i])[0]||0===o[1]?G(e,o,n,t,["Queen","Rook"]):G(e,o,n,t,["Queen","Bishop"]))&&(a[r[0]]=r[1]);return a}function G(e,n,t,a,r){for(var l=Y(n,t,a),o=null;null===e[l];)l=Y(n,l,a);if("boundary"!==e[l]&&e[l].player===a){for(o=l,l=Y(n,l,a);null===e[l];)l=Y(n,l,a);if("boundary"!==e[l]&&e[l].player!==a)for(var i=0;i<r.length;i++)if(e[l].name===r[i])return[o,n]}return null}function W(e,n,t,a,r,l,o,i){var u=[],s=null,c=null;if(n in a)c=[-1*(s=a[n])[0],-1*s[1]],r.toString()!==s.toString()&&r.toString()!==c.toString()||(l?u.push(X(n,t,o)):u.push(L(n,t)));else if(l)n in i?(c=[-1*(s=i[n])[0],-1*s[1]],r.toString()!==s.toString()&&r.toString()!==c.toString()||u.push(X(n,t,o))):u.push(X(n,t,o));else if(t>=91||t<=28)for(var h=[new O(e.player),new j(e.player),new _(e.player),new S(e.player)],p=0;p<h.length;p++)u.push(U(h[p],n,t));else u.push(L(n,t));return u}function $(e,n,t,a,r){for(var l=[],o=Y(n,t,a);null===e[o];)l.push(L(t,o)),o=Y(n,o,a);return"boundary"!==e[o]&&e[o].player!==a&&l.push(L(t,o)),l}function z(e,n){return[te(1,Z(2,e,n),n),ne(1,Z(2,e,n),n),te(1,ee(2,e,n),n),ne(1,ee(2,e,n),n),te(2,Z(1,e,n),n),te(2,ee(1,e,n),n),ne(2,Z(1,e,n),n),ne(2,ee(1,e,n),n)]}function H(e,n){return[Z(1,e,n),te(1,Z(1,e,n),n),ne(1,Z(1,e,n),n),ne(1,e,n),te(1,e,n),te(1,ee(1,e,n),n),ne(1,ee(1,e,n),n),ee(1,e,n)]}function L(e,n){return new K(e,n,null,null,null,null)}function U(e,n,t){return new K(n,t,null,null,null,e)}function V(e,n,t,a){return new K(e,n,null,t,a,null)}function X(e,n,t){return new K(e,n,t,null,null,null)}function Y(e,n,t){var a=e[0],r=e[1],l=te(1,Z(1,n,t),t),o=ne(1,Z(1,n,t),t),i=te(1,ee(1,n,t),t),u=ne(1,ee(1,n,t),t),s=Z(1,n,t),c=ee(1,n,t),h=te(1,n,t),p=ne(1,n,t);return 0===a&&1===r?s:-1===a&&1===r?o:1===a&&1===r?l:1===a&&0===r?h:-1===a&&0===r?p:1===a&&-1===r?i:-1===a&&-1===r?u:0===a&&-1===r?c:void 0}function Z(e,n,t){return"white"===t?n-10*e:n+10*e}function ee(e,n,t){return"white"===t?n+10*e:n-10*e}function ne(e,n,t){return"white"===t?n-e:n+e}function te(e,n,t){return"white"===t?n+e:n-e}var ae={Pawn:1,Knight:3,Bishop:3.3,Rook:5,Queen:9.5,King:0};function re(e){if(0===e.length)return"FEN Error";for(var n,t=Array(64).fill(null),a=[0,0,0,0],r=null,l=0,o=0,i=0,u=0,s=0,c=0;l<=7&&c<e.length;){switch(u=1,e[c]){case"p":i=new w("black");break;case"r":i=new _("black");break;case"n":i=new O("black");break;case"b":i=new j("black");break;case"k":i=new E("black");break;case"q":i=new S("black");break;case"P":i=new w("white");break;case"R":i=new _("white");break;case"N":i=new O("white");break;case"B":i=new j("white");break;case"K":i=new E("white");break;case"Q":i=new S("white");break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":i=null,u=e[c].charCodeAt()-"0".charCodeAt();break;case"/":case" ":l+=1,o=0,c+=1;continue;default:return"FEN error"}for(s=0;s<u;s++)t[8*l+o]=i,o++;c++}for(n="w"===e[c]?"white":"black",c+=2,s=0;s<4&&" "!==e[c];s++){switch(e[c]){case"K":a[0]=1;break;case"Q":a[1]=1;break;case"k":a[2]=1;break;case"q":a[3]=1}c++}"-"!==e[++c]&&(o=e[c].charCodeAt()-"a".charCodeAt(),r=oe(8*(7-(l=e[c+1].charCodeAt()-"1".charCodeAt()))+o));var h=function(e){for(var n=null,t=null,a=0;a<e.length;a++){var r=e[a];null!==r&&"boundary"!==r&&"King"===r.name&&("white"===r.player?n=a:t=a)}return[n,t]}(t=le(t)),p=function(e){for(var n=0,t=0;t<e.length;t++)"boundary"!==e[t]&&null!==e[t]&&("white"===e[t].player?n+=ae[e[t].name]:n-=ae[e[t].name]);return n}(t),v=new D(n,t,h,a,p,r);return function(e){for(var n=e.squares,t=0;t<n.length;t++)if("boundary"!==n[t]&&null!==n[t]){var a=n[t];"Pawn"===a.name&&("white"===a.player?t<81&&(a.has_moved=!0):t>38&&(a.has_moved=!0))}}(v),v}function le(e){for(var n=Array(120).fill(null),t=0,a=0,r=0;r<12;r++)for(var l=0;l<10;l++)a=10*r+l,0===l||9===l||0===r||1===r||10===r||11===r?n[a]="boundary":(n[a]=e[t],t+=1);return n}function oe(e){for(var n=0,t=0;t<12;t++)for(var a=0;a<10;a++){if(0!==a&&9!==a&&0!==t&&1!==t&&10!==t&&11!==t){if(e===n)return 10*t+a;n+=1}}}function ie(){return le(function(){for(var e=Array(64).fill(null),n=0;n<8;n++)e[n+8]=new w("black"),e[n+48]=new w("white");for(var t="black",a=0;a<2;a++)1===a&&(t="white"),e[56*a]=new _(t),e[56*a+7]=new _(t),e[56*a+1]=new O(t),e[56*a+6]=new O(t),e[56*a+2]=new j(t),e[56*a+5]=new j(t),e[56*a+3]=new S(t),e[56*a+4]=new E(t);return e}())}var ue=1e4,se=9e3,ce=null,he=null,pe=null,ve=!1;function fe(e,n,t,a){if(0===n)return{value:e.material_balance,move:null};var r=P(e);if(0===r.length)return"white"===e.player?{value:-se,move:null}:{value:se,move:null};if(ve)return{value:0,move:null};if("white"===e.player){for(var l=-ue,o=null,i=0;i<r.length;i++){var u=r[i],s=M(e,u);if((l=Math.max(l,fe(s,n-1,t,a).value))>t&&(t=l,o=u),t>=a)break}return performance.now()-ce>=he?(ve=!0,{value:0,move:null}):{value:l,move:o}}for(var c=ue,h=null,p=0;p<r.length;p++){var v=r[p],f=M(e,v);if((c=Math.min(c,fe(f,n-1,t,a).value))<a&&(a=c,h=v),t>=a)break}return performance.now()-ce>=he?(ve=!0,{value:0,move:null}):{value:c,move:h}}function me(e,n,t){!function(e){ce=performance.now(),{},he=e,pe=0,ve=!1}(t);for(var a={value:0,move:null},r=1;r<=n;r++){var l=fe(e,r,-ue,ue);null!==l.move&&(a=l,pe=r)}return console.log(pe),a}var de=1e4,ge=9e3,be={Pawn:0,Knight:0,Bishop:0,Rook:0,Queen:0,King:0},ye=null,ke=1;function we(){var e={},n=0;for(var t in be)e[t]=be[t]+(Math.random()-.5)*ke,Math.abs(e[t])>n&&(n=Math.abs(e[t]));for(t in e)e[t]=e[t]/n;ye=e}function _e(e){for(var n=null,t=0,a=0;e.history.length<100;){t=(n="white"===e.position.player?Oe(e.position,1,-de,de,"base"):Oe(e.position,1,-de,de,"genetic")).value;var r=n.move;if(!(Math.abs(t)<1e3))break;e.make_move(r)}return 9e3===t?a=-1:-9e3===t&&(a=1),{result:a,weights:ye}}function Oe(e,n,t,a,r){if(0===n)return"genetic"===r?{value:function(e){for(var n=e.squares,t=0,a=0;a<n.length;a++)if("boundary"!==n[a]&&null!==n[a]){var r=n[a];"white"===r.player?t+=ye[r.name]:t-=ye[r.name]}return t}(e),move:null}:{value:function(e){for(var n=e.squares,t=0,a=0;a<n.length;a++)if("boundary"!==n[a]&&null!==n[a]){var r=n[a];"white"===r.player?t+=be[r.name]:t-=be[r.name]}return t}(e),move:null};var l=P(e);if(0===l.length){var o=!1;return o?"white"===e.player?(o=I(e.squares,e.king_locations[0],e.player)[0],{value:-ge,move:null}):(o=I(e.squares,e.king_locations[1],e.player)[0],{value:ge,move:null}):{value:0,move:null}}if("white"===e.player){for(var i=-de,u=null,s=0;s<l.length;s++){var c=l[s],h=M(e,c);if((i=Math.max(i,Oe(h,n-1,t,a,r).value))>t&&(t=i,u=c),t>=a)break}return{value:i,move:u}}for(var p=de,v=null,f=0;f<l.length;f++){var m=l[f],d=M(e,m);if((p=Math.min(p,Oe(d,n-1,t,a,r).value))<a&&(a=p,v=m),t>=a)break}return{value:p,move:v}}var je=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(s.a)(this,Object(c.a)(n).call(this,e))).state={history:[{position:new D("white",ie(),[95,25],[1,1,1,1],0)}],drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null},t}return Object(h.a)(n,e),Object(u.a)(n,[{key:"train",value:function(){var e=this.state.history.slice(),n=e[e.length-1].position;new q(n,e);!function(){var e=new D("white",ie(),[95,25],[1,1,1,1],0);we();var n=0;ke=1;for(var t=0;t<50;t++){var a=new q(e,[e],[]),r=P(a.position),l=r[Math.floor(Math.random()*r.length)];a.make_move(l),l=(r=P(a.position))[Math.floor(Math.random()*r.length)],a.make_move(l),n+=_e(a).result}console.log(n,be,ye),n>3&&(ke/=2,be=ye,we())}()}},{key:"reset",value:function(){this.setState({history:[{position:new D("white",ie(),[95,25],[1,1,1,1],0)}],drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null})}},{key:"back",value:function(){var e=this.state.history.slice();1!==e.length&&(e.pop(),this.setState({history:e,status:null}))}},{key:"setup_fen",value:function(e){var n=re(e);"FEN Error"!==n?this.setState({history:[{position:n}],drag_end:null,promotion:{class:"hidden",start:null,end:null,player:null},status:null}):alert("FEN ERROR")}},{key:"engine_move",value:function(){var e=this.state.history.slice(),n=e[e.length-1].position,t=me(n,10,1e3);if(console.log(t.value),null!==t.move){var a=M(n,t.move);this.setState({history:e.concat([{position:a}]),engine_turn:!1})}else this.setState({status:"Game Over"})}},{key:"handle_drop",value:function(e){this.setState({drag_end:e})}},{key:"handle_drag_end",value:function(e){var n=this.state.history.slice(),t=n[n.length-1].position,a=oe(e),r=oe(this.state.drag_end),l=t.squares[a];if((r<=28||r>=91)&&"Pawn"===l.name){var o={class:"promotion_container",start:a,end:r,player:t.player};this.setState({promotion:o})}else this.change_states(n,t,a,r,null)}},{key:"handle_promotion",value:function(e){var n=this.state.history.slice(),t=n[n.length-1].position,a=this.state.promotion,r=a.start,l=a.end;this.change_states(n,t,r,l,e),this.setState({promotion:{class:"hidden",start:null,end:null,player:null}})}},{key:"change_states",value:function(e,n,t,a,r){var l=P(n),o=function(e,n,t,a){var r=t.squares,l=t.squares[e],o=null,i=null,u=null;return"Pawn"===l.name&&(9===Math.abs(e-n)&&null===r[n]?o="white"===t.player?e+1:e-1:11===Math.abs(e-n)&&null===r[n]&&(o="white"===t.player?e-1:e+1)),"King"===l.name&&(n-e===2?(i=n+1,u=e+1):e-n===2&&(i=n-2,u=e-1)),new K(e,n,o,i,u,a)}(t,a,n,r),i=null;if(function(e,n){for(var t=!1,a=0;a<n.length;a++)JSON.stringify(e)===JSON.stringify(n[a])&&(t=!0);return t}(o,l)){var u=M(n,o);0===P(u).length&&(i="Game Over"),this.setState({history:e.concat([{position:u}]),drag_end:null,status:i})}}},{key:"render",value:function(){var e=this,n=this.state.history,t=n[n.length-1].position,a=function(e){for(var n=Array(64).fill(null),t=0,a=0,r=0;r<12;r++)for(var l=0;l<10;l++)a=10*r+l,0===l||9===l||0===r||1===r||10===r||11===r||(n[t]=e[a],t+=1);return n}(t.squares),l=t.player,o=this.state.promotion.class;return r.a.createElement("div",{className:"game_container"},r.a.createElement(Ce,{back:function(){return e.back()},reset:function(){return e.reset()},engine_move:function(){return e.engine_move()},train:function(){return e.train()}}),r.a.createElement("div",{className:"board_container"},r.a.createElement(Se,{squares:a,onDrop:function(n){return e.drop(n)},player:l,handle_drop:function(n){return e.handle_drop(n)},handle_drag_end:function(n){return e.handle_drag_end(n)}})),r.a.createElement(Ne,{setup_fen:function(n){return e.setup_fen(n)}}),r.a.createElement(qe,{className:o,player:l,handle_promotion:function(n){return e.handle_promotion(n)}}))}}]),n}(a.Component),Se=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"renderSquares",value:function(){for(var e=this,n=[],t=!1,a=0;a<8;a++){t=!t;for(var l=[],o=function(){var n=8*a+i,o=r.a.createElement(Ee,{value:e.props.squares[n],key:n,color:t,player:e.props.player,handle_drop:function(){return e.props.handle_drop(n)},handle_drag_end:function(n){return e.props.handle_drag_end(n)},id:n});l.push(o),t=!t},i=0;i<8;i++)o();l=r.a.createElement("div",{className:"board_row",key:a}," ",l," "),n.push(l)}return n}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderSquares())}}]),n}(r.a.Component),Ee=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"renderSquare",value:function(e){var n=this,t="dark square",a=null,l=null,o=null;return e&&(t="light square"),this.props.value&&(a=this.props.value.style,l=this.props.value.url,o=this.props.value.player),this.props.player===o?r.a.createElement("div",{className:t},r.a.createElement(g,{url:l,id:this.props.id,handle_drag_end:function(e){return n.props.handle_drag_end(e)}})):r.a.createElement(y,{class_name:t,style:a,handle_drop:function(){return n.props.handle_drop()}})}},{key:"render",value:function(){var e=this.props.color;return r.a.createElement(r.a.Fragment,null,this.renderSquare(e))}}]),n}(r.a.Component);function Ce(e){return r.a.createElement("div",{className:"button_container"},r.a.createElement("button",{className:"button_element",onClick:function(){return e.reset()}}," Reset"),r.a.createElement("button",{className:"button_element",onClick:function(){return e.back()}}," Back"),r.a.createElement("button",{className:"button_element",onClick:function(){return e.engine_move()}}," Engine Move"))}var Ne=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(s.a)(this,Object(c.a)(n).call(this,e))).state={value:""},t}return Object(h.a)(n,e),Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.props.setup_fen(this.state.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(n){return e.submit(n)},className:"fen_input"},r.a.createElement("label",null,"FEN String: \xa0",r.a.createElement("input",{type:"text",className:"input_box",value:this.state.value,onChange:function(n){return e.handleChange(n)}})),r.a.createElement("input",{type:"submit",className:"input_button",value:"Set Position"}))}}]),n}(r.a.Component),qe=function(e){function n(){return Object(i.a)(this,n),Object(s.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this,n=new O(this.props.player),t=new j(this.props.player),a=new _(this.props.player),l=new S(this.props.player);return r.a.createElement("div",{className:this.props.className},r.a.createElement("div",{className:"promotion"},r.a.createElement("button",{className:"promotion_button",style:n.style,onClick:function(){return e.props.handle_promotion(n)}}),r.a.createElement("button",{className:"promotion_button",style:t.style,onClick:function(){return e.props.handle_promotion(t)}}),r.a.createElement("button",{className:"promotion_button",style:a.style,onClick:function(){return e.props.handle_promotion(a)}}),r.a.createElement("button",{className:"promotion_button",style:l.style,onClick:function(){return e.props.handle_promotion(l)}})))}}]),n}(r.a.Component),De=Object(p.DragDropContext)(f.a)(je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},27:function(e,n,t){},69:function(e,n,t){e.exports=t(193)},74:function(e,n,t){}},[[69,2,1]]]);
//# sourceMappingURL=main.79db2b52.chunk.js.map